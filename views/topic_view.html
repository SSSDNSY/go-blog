{{template "header"}}
<title>编辑 {{.Topic.Title}} - imiBLOG</title>
</head>
<body class="">
{{template "navbar" .}}
<div class="container mt-2 mb-2">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">{{.Topic.Title}} 附件：( <a
                        href="/attachment/{{.Topic.Attachment}}">{{.Topic.Attachment}}</a>)</h4>
            <textarea id="editorView" class="text-default">{{.Topic.Content}}</textarea>
        </div>
    </div>
    <a href="/topic/edit?tid={{.Tid}}" class="btn btn-primary float-right">修改文章</a>
</div>
<br/>
<br/>
<div class="container">
    {{$labels := .Labels}}
    {{range $labels}}
        <button class="btn btn-default"><a href="/?label={{.}}"> {{.}}</a></button>
    {{end}}
</div>

<div class="container mb-2">
    {{$Tid := .Topic.Id}}
    {{$isLogin := .IsLogin}}
    {{range .Replies}}
        <div class="border border-primary rounded mt-4 mt-6">
            <h6> {{.Name}}</h6>
            <textarea class="text-info">{{.Content}}</textarea>
            {{if $isLogin}}
                <a class="float-right text-danger" href="/reply/delete?tid={{$Tid}}&rid={{.Id}}">删除</a>
            {{end}}
        </div>
    {{end}}
    <div class="mt-2">
        <h3>文章评论</h3>
        <form action="/reply/add" method="post" class="mb-2 ">
            <input type="hidden" name="tid" value="{{.Topic.Id}}">
            <div class="form-group">
                <label for="">显示昵称：</label>
                <input type="text" class="form-control" name="nickName">
            </div>
            <div class="form-group">
                <label for="">评论内容：</label>
                <textarea name="content" id="editorComment" cols="30" rows="5" class="form-control"></textarea>
            </div>
            <button type="submit" class="btn btn-primary ">评论</button>
        </form>
    </div>
</div>
</body>
{{template "footer"}}
<script>
    let editorView = new SimpleMDE({
        element: document.getElementById("editorView"),
        toolbar: ["bold", "strikethrough", "italic", "heading", "|", "code", "quote", "|",
            "unordered-list", "ordered-list", "image", "table", "|", "preview",
            {
                name: "side-by-side",
                className: "fa fa-columns  no-disable no-mobile",
                title: "side-by-side",
                action:SimpleMDE.toggleSideBySide

            }, "fullscreen"],
    });
</script>
</html>

